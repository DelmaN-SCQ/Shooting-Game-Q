<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Futuristic Shooter — Pro (stable)</title>
<style>
  :root{
    --bg1:#071025; --bg2:#000814; --accent:#1de9b6; --accent2:#66fcf1;
    --muted:#9aa5b1;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));font-family:Inter,Arial,Helvetica,sans-serif;color:#e6f7ff;}
  canvas{display:block;width:100vw;height:100vh;}
  .overlay{position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;pointer-events:none;}
  .card{pointer-events:auto;background:linear-gradient(180deg,rgba(7,16,37,0.85),rgba(0,8,20,0.9));border-radius:14px;padding:22px;border:1px solid rgba(110,230,190,0.12);box-shadow:0 10px 30px rgba(0,0,0,0.6);min-width:320px;max-width:720px;}
  .title{font-size:36px;text-align:center;margin:0 0 6px 0;color:var(--accent);letter-spacing:1px;text-shadow:0 6px 18px rgba(34,202,163,0.08);}
  .subtitle{color:var(--muted);text-align:center;margin:6px 0 14px 0;}
  .btn{display:inline-block;padding:12px 20px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;color:#021019;font-weight:700;cursor:pointer;font-size:16px;margin:6px;}
  .btn.small{padding:8px 12px;font-size:13px;border-radius:8px;}
  .row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
  #hudCluster{position:fixed;right:18px;top:18px;display:flex;flex-direction:column;gap:8px;align-items:flex-end;pointer-events:auto}
  .hudBox{background:rgba(10,18,30,0.45);padding:8px 12px;border-radius:10px;border:1px solid rgba(160,255,230,0.06);backdrop-filter:blur(6px);min-width:170px}
  .hudTitle{font-size:13px;color:var(--muted);margin:0}
  .hudValue{font-size:18px;color:#eafff7;margin:0;font-weight:600}
  #settingsToggle{position:fixed;left:18px;top:18px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);color:var(--accent);cursor:pointer;z-index:50}
  #pauseOverlay{position:fixed;left:0;top:0;right:0;bottom:0;display:none;align-items:center;justify-content:center;background:rgba(1,4,10,0.6);backdrop-filter:blur(4px);z-index:40}
  .pauseBox{border-radius:12px;padding:18px 26px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));text-align:center;border:1px solid rgba(255,255,255,0.04)}
  .pauseTitle{font-size:42px;color:var(--accent);margin:0 0 6px 0}
  #settingsPanel{position:fixed;left:18px;top:60px;width:320px;max-width:calc(100vw - 40px);z-index:60;display:none}
  .settingRow{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.005));margin-bottom:8px;border:1px solid rgba(255,255,255,0.02)}
  .muted{color:var(--muted);font-size:13px}
  .center{display:flex;align-items:center;justify-content:center}
  footer{position:fixed;left:0;right:0;bottom:8px;text-align:center;color:rgba(230,247,255,0.06);font-size:12px}
  @media (max-width:520px){
    .card{min-width:260px;padding:16px}
    .title{font-size:28px}
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div id="hudCluster" aria-hidden="true">
  <div class="hudBox"><p class="hudTitle">Punkty</p><p id="hudScore" class="hudValue">0</p></div>
  <div class="hudBox"><p class="hudTitle">Poziom</p><p id="hudLevel" class="hudValue">1</p></div>
  <div class="hudBox"><p class="hudTitle">High Score</p><p id="hudHS" class="hudValue">0</p></div>
</div>

<button id="settingsToggle" title="Ustawienia (kliknij)">⚙</button>
<div id="settingsPanel" class="card" aria-hidden="true">
  <h3 style="margin:0 0 8px 0;color:var(--accent)">Ustawienia</h3>
  <div class="settingRow"><div><div style="font-weight:700">Dźwięk</div><div class="muted">Włącz/Wyłącz efekty</div></div>
    <div><input type="checkbox" id="soundToggle" checked /></div></div>

  <div class="settingRow"><div><div style="font-weight:700">Głośność</div><div class="muted">Reguluje level efektów</div></div>
    <div><input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" /></div></div>

  <div class="settingRow"><div><div style="font-weight:700">Trudność</div><div class="muted">Wybierz tryb</div></div>
    <div><select id="difficulty"><option value="easy">Easy</option><option value="normal" selected>Normal</option><option value="hard">Hard</option></select></div></div>

  <div class="settingRow"><div><div style="font-weight:700">Zachowaj progres</div><div class="muted">Poziom/XP będą zapisane</div></div>
    <div><button id="resetProgress" class="btn small" style="background:#ff6b6b;color:white">Resetuj</button></div></div>

  <div style="margin-top:8px;text-align:center">
    <button id="closeSettings" class="btn small" style="background:linear-gradient(90deg,#66fcf1,#1de9b6)">Zamknij</button>
  </div>
</div>

<div id="menu" class="overlay">
  <div class="card">
    <h2 class="title">FUTURISTIC SHOOTER</h2>
    <p class="subtitle">Pełnoekranowa strzelanka — pauza: <strong>P</strong> | ustawienia: ⚙</p>
    <div class="row"><button id="playBtn" class="btn">Zagraj</button><button id="playDemo" class="btn small">Szybki start</button></div>
    <p style="color:var(--muted);margin-top:12px;font-size:13px">Poruszaj się strzałkami, strzelaj SPACJĄ. Poziomy i XP zapisują się po odświeżeniu.</p>
  </div>
</div>

<div id="pauseOverlay">
  <div class="pauseBox">
    <div class="pauseTitle">PAUZA</div>
    <div style="margin-top:8px;color:var(--muted)">Naciśnij <strong>P</strong> aby wznowić</div>
    <div style="margin-top:12px" class="row"><button id="resumeBtn" class="btn small">Wznów</button><button id="pauseMenuBtn" class="btn small">Menu</button></div>
  </div>
</div>

<div id="gameover" class="overlay" style="display:none">
  <div class="card">
    <h2 class="title">Koniec gry</h2>
    <p class="subtitle">Twój wynik: <span id="finalScore">0</span></p>
    <div class="row"><button id="restartBtnMain" class="btn">Restart</button><button id="menuBtnMain" class="btn small">Menu</button></div>
  </div>
</div>

<footer>© Futuristic Shooter — demo</footer>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize, {passive:true}); resize();

/* Persistent state */
let level = parseInt(localStorage.getItem('fs_level')) || 1;
let xp = parseInt(localStorage.getItem('fs_xp')) || 0;
let xpGoal = parseInt(localStorage.getItem('fs_xpGoal')) || 100;
let highScore = parseInt(localStorage.getItem('fs_high')) || 0;

let gameStarted=false, gameOver=false, paused=false;
let score=0, kills=0;
const maxEnemies=10, maxPowerUps=2;
let spawnRate=1200, enemyHP=40;

const difficultySelect = document.getElementById('difficulty');
function applyDifficulty(mode){
  if(mode==='easy'){ spawnRate=1600; enemyHP=30; }
  else if(mode==='normal'){ spawnRate=1200; enemyHP=40; }
  else { spawnRate=900; enemyHP=55; }
}
applyDifficulty(difficultySelect.value);

function makeSprite_drawPixelArt(w,h,drawFn){
  const c=document.createElement('canvas'); c.width=w; c.height=h;
  const g=c.getContext('2d'); g.imageSmoothingEnabled=false;
  drawFn(g,w,h);
  return c.toDataURL();
}

const spriteSize = 32;

// player sprite: rocket with transparent background
const playerSrc = makeSprite_drawPixelArt(spriteSize, spriteSize, (g, w, h) => {
  g.clearRect(0, 0, w, h); // przezroczyste tło
  g.fillStyle = '#00d1a1'; g.fillRect(12, 4, 8, 18);
  g.fillStyle = '#003f2f'; g.fillRect(12, 4, 8, 4);
  g.fillStyle = '#00b388'; g.fillRect(8, 18, 4, 6); g.fillRect(20, 18, 4, 6);
  g.fillStyle = '#ff8a00'; g.fillRect(14, 22, 4, 6);
});

const bulletSrc = makeSprite_drawPixelArt(8,16,(g,w,h)=>{
  g.clearRect(0,0,w,h); g.fillStyle='#ffec5c'; g.fillRect(2,0,4,12); g.fillStyle='#ffaa00'; g.fillRect(3,12,2,4);
});
const enemySrc = makeSprite_drawPixelArt(spriteSize,spriteSize,(g,w,h)=>{
  g.clearRect(0,0,w,h); g.fillStyle='#ff6b6b'; g.fillRect(6,6,20,20); g.fillStyle='#7f1d1d'; g.fillRect(6,6,20,6); g.fillStyle='#ffa3a3'; g.fillRect(10,12,12,12);
});

const playerImg = new Image(); playerImg.src = playerSrc;
const bulletImg = new Image(); bulletImg.src = bulletSrc;
const enemyImg = new Image(); enemyImg.src = enemySrc;

/* ... reszta kodu gry pozostaje bez zmian ... */
</script>

</body>
</html>
