<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Futuristic Shooter — Pro (motywy)</title>
<style>
  :root{
    --bg1:#071025; --bg2:#000814; --accent:#1de9b6; --accent2:#66fcf1;
    --muted:#9aa5b1;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));font-family:Inter,Arial,Helvetica,sans-serif;color:#e6f7ff;}
  canvas{display:block;width:100vw;height:100vh;}
  .overlay{position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;pointer-events:none;}
  .card{pointer-events:auto;background:linear-gradient(180deg,rgba(7,16,37,0.85),rgba(0,8,20,0.9));border-radius:14px;padding:22px;border:1px solid rgba(110,230,190,0.12);box-shadow:0 10px 30px rgba(0,0,0,0.6);min-width:320px;max-width:720px;}
  .title{font-size:36px;text-align:center;margin:0 0 6px 0;color:var(--accent);letter-spacing:1px;text-shadow:0 6px 18px rgba(34,202,163,0.08);}
  .subtitle{color:var(--muted);text-align:center;margin:6px 0 14px 0;}
  .btn{display:inline-block;padding:12px 20px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;color:#021019;font-weight:700;cursor:pointer;font-size:16px;margin:6px;}
  .btn.small{padding:8px 12px;font-size:13px;border-radius:8px;}
  .row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
  #hudCluster{position:fixed;right:18px;top:18px;display:flex;flex-direction:column;gap:8px;align-items:flex-end;pointer-events:auto}
  .hudBox{background:rgba(10,18,30,0.45);padding:8px 12px;border-radius:10px;border:1px solid rgba(160,255,230,0.06);backdrop-filter:blur(6px);min-width:170px}
  .hudTitle{font-size:13px;color:var(--muted);margin:0}
  .hudValue{font-size:18px;color:#eafff7;margin:0;font-weight:600}
  #settingsToggle{position:fixed;left:18px;top:18px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);color:var(--accent);cursor:pointer;z-index:50}
  #pauseOverlay{position:fixed;left:0;top:0;right:0;bottom:0;display:none;align-items:center;justify-content:center;background:rgba(1,4,10,0.6);backdrop-filter:blur(4px);z-index:40}
  .pauseBox{border-radius:12px;padding:18px 26px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));text-align:center;border:1px solid rgba(255,255,255,0.04)}
  .pauseTitle{font-size:42px;color:var(--accent);margin:0 0 6px 0}
  #settingsPanel{position:fixed;left:18px;top:60px;width:320px;max-width:calc(100vw - 40px);z-index:60;display:none}
  .settingRow{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.005));margin-bottom:8px;border:1px solid rgba(255,255,255,0.02)}
  .muted{color:var(--muted);font-size:13px}
  .center{display:flex;align-items:center;justify-content:center}
  footer{position:fixed;left:0;right:0;bottom:8px;text-align:center;color:rgba(230,247,255,0.06);font-size:12px}
  @media (max-width:520px){
    .card{min-width:260px;padding:16px}
    .title{font-size:28px}
  }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div id="hudCluster" aria-hidden="true">
  <div class="hudBox"><p class="hudTitle">Punkty</p><p id="hudScore" class="hudValue">0</p></div>
  <div class="hudBox"><p class="hudTitle">Poziom</p><p id="hudLevel" class="hudValue">1</p></div>
  <div class="hudBox"><p class="hudTitle">High Score</p><p id="hudHS" class="hudValue">0</p></div>
</div>

<button id="settingsToggle" title="Ustawienia (kliknij)">⚙</button>
<div id="settingsPanel" class="card" aria-hidden="true">
  <h3 style="margin:0 0 8px 0;color:var(--accent)">Ustawienia</h3>
  <div class="settingRow"><div><div style="font-weight:700">Dźwięk</div><div class="muted">Włącz/Wyłącz efekty</div></div>
    <div><input type="checkbox" id="soundToggle" checked /></div></div>
  <div class="settingRow"><div><div style="font-weight:700">Głośność</div><div class="muted">Reguluje level efektów</div></div>
    <div><input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" /></div></div>
  <div class="settingRow"><div><div style="font-weight:700">Trudność</div><div class="muted">Wybierz tryb</div></div>
    <div><select id="difficulty"><option value="easy">Easy</option><option value="normal" selected>Normal</option><option value="hard">Hard</option></select></div></div>
  <div class="settingRow"><div><div style="font-weight:700">Zachowaj progres</div><div class="muted">Poziom/XP będą zapisane</div></div>
    <div><button id="resetProgress" class="btn small" style="background:#ff6b6b;color:white">Resetuj</button></div></div>
  <div style="margin-top:8px;text-align:center">
    <button id="closeSettings" class="btn small" style="background:linear-gradient(90deg,#66fcf1,#1de9b6)">Zamknij</button>
  </div>
</div>

<div id="menu" class="overlay">
  <div class="card">
    <h2 class="title">FUTURISTIC SHOOTER</h2>
    <p class="subtitle">Pełnoekranowa strzelanka — pauza: <strong>P</strong> | ustawienia: ⚙</p>
    <div class="row"><button id="playBtn" class="btn">Zagraj</button><button id="playDemo" class="btn small">Szybki start</button></div>
    <p style="color:var(--muted);margin-top:12px;font-size:13px">Poruszaj się strzałkami, strzelaj SPACJĄ. Poziomy i XP zapisują się po odświeżeniu.</p>
  </div>
</div>

<div id="pauseOverlay">
  <div class="pauseBox">
    <div class="pauseTitle">PAUZA</div>
    <div style="margin-top:8px;color:var(--muted)">Naciśnij <strong>P</strong> aby wznowić</div>
    <div style="margin-top:12px" class="row"><button id="resumeBtn" class="btn small">Wznów</button><button id="pauseMenuBtn" class="btn small">Menu</button></div>
  </div>
</div>

<div id="gameover" class="overlay" style="display:none">
  <div class="card">
    <h2 class="title">Koniec gry</h2>
    <p class="subtitle">Twój wynik: <span id="finalScore">0</span></p>
    <div class="row"><button id="restartBtnMain" class="btn">Restart</button><button id="menuBtnMain" class="btn small">Menu</button></div>
  </div>
</div>

<footer>© Futuristic Shooter — demo</footer>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize, {passive:true}); resize();

let level = parseInt(localStorage.getItem('fs_level'))||1;
let xp = parseInt(localStorage.getItem('fs_xp'))||0;
let xpGoal = parseInt(localStorage.getItem('fs_xpGoal'))||100;
let highScore = parseInt(localStorage.getItem('fs_high'))||0;

let gameStarted=false, gameOver=false, paused=false;
let score=0, kills=0;
const maxEnemies=10, maxPowerUps=2;
let spawnRate=1200, enemyHP=40;
const difficultySelect=document.getElementById('difficulty');

function applyDifficulty(mode){
  if(mode==='easy'){ spawnRate=1600; enemyHP=30; }
  else if(mode==='normal'){ spawnRate=1200; enemyHP=40; }
  else { spawnRate=900; enemyHP=55; }
}
applyDifficulty(difficultySelect.value);

const stars=Array.from({length:120},()=>({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*2+0.5, speed:Math.random()*0.5+0.2}));
function drawBackground(){
  const g=ctx.createLinearGradient(0,0,0,canvas.height);
  g.addColorStop(0,'#071025'); g.addColorStop(1,'#000814');
  ctx.fillStyle=g; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#66fcf1';
  for(const s of stars){ ctx.fillRect(s.x,s.y,s.size,s.size); s.y+=s.speed; if(s.y>canvas.height){ s.y=0; s.x=Math.random()*canvas.width; } }
  for(let i=0;i<6;i++){ ctx.globalAlpha=0.02+i*0.01; ctx.fillStyle=i%2===0?'#08303a':'#06202a'; ctx.fillRect((i*150+performance.now()/60)%canvas.width,i*80,3,canvas.height);}
  ctx.globalAlpha=1;
}

function makeSprite_drawPixelArt(w,h,drawFn){const c=document.createElement('canvas');c.width=w;c.height=h;const g=c.getContext('2d');g.imageSmoothingEnabled=false;drawFn(g,w,h);return c.toDataURL();}
const spriteSize=32;
const playerSrc=makeSprite_drawPixelArt(spriteSize,spriteSize,(g,w,h)=>{g.clearRect(0,0,w,h);g.fillStyle='#00d1a1';g.fillRect(12,4,8,18);g.fillStyle='#003f2f';g.fillRect(12,4,8,4);g.fillStyle='#00b388';g.fillRect(8,18,4,6);g.fillRect(20,18,4,6);g.fillStyle='#ff8a00';g.fillRect(14,22,4,6);});
const bulletSrc=makeSprite_drawPixelArt(8,16,(g,w,h)=>{g.clearRect(0,0,w,h);g.fillStyle='#ffec5c';g.fillRect(2,0,4,12);g.fillStyle='#ffaa00';g.fillRect(3,12,2,4);});
const enemySrc=makeSprite_drawPixelArt(spriteSize,spriteSize,(g,w,h)=>{g.clearRect(0,0,w,h);g.fillStyle='#ff6b6b';g.fillRect(6,6,20,20);g.fillStyle='#7f1d1d';g.fillRect(6,6,20,6);g.fillStyle='#ffa3a3';g.fillRect(10,12,12,12);});
const playerImg=new Image(); playerImg.src=playerSrc;
const bulletImg=new Image(); bulletImg.src=bulletSrc;
const enemyImg=new Image(); enemyImg.src=enemySrc;

const player={x:canvas.width/2, y:canvas.height-110, width:48, height:64, speed:7, lives:100, maxLives:100, shield:false};
const bullets=[], enemies=[], powerUps=[];
const audioCtx=new(window.AudioContext||window.webkitAudioContext)();
let soundOn=true, masterGain=audioCtx.createGain(); masterGain.gain.value=0.9; masterGain.connect(audioCtx.destination);
const volSlider=document.getElementById('vol'); volSlider.oninput=()=>{ masterGain.gain.value=parseFloat(volSlider.value);};

function playTone(freq,type='sine',time=0.06,gain=0.12){if(!soundOn)return;const t0=audioCtx.currentTime;const o=audioCtx.createOscillator();const g=audioCtx.createGain();o.type=type;o.frequency.setValueAtTime(freq,t0);g.gain.setValueAtTime(gain,t0);o.connect(g);g.connect(masterGain);o.start(t0);o.stop(t0+time);}
function soundShoot(){ playTone(1200,'sawtooth',0.05,0.06);}
function soundHit(){ playTone(600,'triangle',0.08,0.08);}
function soundDamage(){ playTone(220,'sawtooth',0.18,0.14);}
function soundPickup(){ playTone(1400,'sine',0.12,0.08);}
function soundLevelUp(){ const now=audioCtx.currentTime;[520,660,780].forEach((f,i)=>{const o=audioCtx.createOscillator();const g=audioCtx.createGain();o.type='sine';o.frequency.setValueAtTime(f,now);g.gain.setValueAtTime(0.08/(i+1),now);o.connect(g);g.connect(masterGain);o.start(now+i*0.02);o.stop(now+0.4+i*0.02);});}

const hudScore=document.getElementById('hudScore');
const hudLevel=document.getElementById('hudLevel');
const hudHS=document.getElementById('hudHS');
const playBtn=document.getElementById('playBtn');
const playDemoBtn=document.getElementById('playDemo');
const menuElem=document.getElementById('menu');
const pauseOverlay=document.getElementById('pauseOverlay');
const settingsToggle=document.getElementById('settingsToggle');
const settingsPanel=document.getElementById('settingsPanel');
const closeSettings=document.getElementById('closeSettings');
const soundToggle=document.getElementById('soundToggle');
const resetProgress=document.getElementById('resetProgress');
const resumeBtn=document.getElementById('resumeBtn');
const pauseMenuBtn=document.getElementById('pauseMenuBtn');
const restartBtnMain=document.getElementById('restartBtnMain');
const menuBtnMain=document.getElementById('menuBtnMain');

playBtn.onclick=()=>{ startGame(); }
playDemoBtn.onclick=()=>{ startGame(true); }
resumeBtn.onclick=()=>{ togglePause(false); }
pauseMenuBtn.onclick=()=>{ togglePause(false); menuElem.style.display='flex'; gameOver=false; gameStarted=false; }
restartBtnMain.onclick=()=>{ startGame(); document.getElementById('gameover').style.display='none'; }
menuBtnMain.onclick=()=>{ document.getElementById('gameover').style.display='none'; menuElem.style.display='flex'; gameStarted=false; gameOver=false; }

settingsToggle.onclick=()=>{ settingsPanel.style.display=settingsPanel.style.display==='block'?'none':'block'; };
closeSettings.onclick=()=>{ settingsPanel.style.display='none'; };
soundToggle.onchange=()=>{ soundOn=soundToggle.checked; if(!soundOn) masterGain.gain.value=0; else masterGain.gain.value=parseFloat(volSlider.value);};
difficultySelect.onchange=()=>{ applyDifficulty(difficultySelect.value); refreshSpawner(); };
resetProgress.onclick=()=>{ if(confirm('Czy na pewno zresetować poziom/XP/high score?')){ level=1; xp=0; xpGoal=100; highScore=0; localStorage.clear(); updateHUD(); }};

function spawnEnemy(){
  if(enemies.length>=maxEnemies) return;
  const size=30+Math.random()*40; const x=Math.random()*(canvas.width-size);
  const colors=['#ff6b6b','#ffb86b','#b86bff','#6bd9ff','#1de9b6']; const color=colors[Math.floor(Math.random()*colors.length)];
  const shapeType=Math.random()<0.5?'rect':'triangle';
  enemies.push({x,y:-size,width:size,height:size,hp:enemyHP,maxHp:enemyHP,color,flash:0,shape:shapeType});
}

function spawnPowerUp(){
  if(powerUps.length>=maxPowerUps) return;
  const types=['life','shield']; const type=types[Math.floor(Math.random()*types.length)];
  const size=18; const x=Math.random()*(canvas.width-size); powerUps.push({x,y:-size,width:size,height:size,type,type2:type==='life'?'#1de9b6':'#66fcf1',speed:2});
}

let keys={};
window.addEventListener('keydown',e=>{keys[e.code]=true; if(e.code==='KeyP') togglePause(!paused);});
window.addEventListener('keyup',e=>{keys[e.code]=false;});

function togglePause(state){ paused=state; pauseOverlay.style.display=paused?'flex':'none'; }

function startGame(demo=false){
  gameStarted=true; gameOver=false; score=0; kills=0; bullets.length=0; enemies.length=0; powerUps.length=0;
  player.x=canvas.width/2; player.y=canvas.height-110; player.lives=player.maxLives; player.shield=false;
  menuElem.style.display='none'; document.getElementById('gameover').style.display='none';
  lastSpawn=performance.now(); lastPU=performance.now();
  requestAnimationFrame(gameLoop);
}

let lastSpawn=0, lastPU=0;

function updateHUD(){ hudScore.textContent=score; hudLevel.textContent=level; hudHS.textContent=highScore; }

function gameLoop(time){
  if(!gameStarted) return;
  if(!paused && !gameOver){
    drawBackground();
    // ruch gracza
    if(keys['ArrowLeft'] && player.x>0) player.x-=player.speed;
    if(keys['ArrowRight'] && player.x+player.width<canvas.width) player.x+=player.speed;
    if(keys['ArrowUp'] && player.y>0) player.y-=player.speed;
    if(keys['ArrowDown'] && player.y+player.height<canvas.height) player.y+=player.speed;
    // strzały
    if(keys['Space'] && bullets.length<5){ bullets.push({x:player.x+player.width/2-4,y:player.y-16,width:8,height:16,speed:12}); soundShoot(); keys['Space']=false; }

    // bullets
    bullets.forEach((b,i)=>{ b.y-=b.speed; if(b.y<0) bullets.splice(i,1); });

    // enemies
    if(time-lastSpawn>spawnRate){ spawnEnemy(); lastSpawn=time; }
    enemies.forEach((e,ei)=>{
      e.y+=2; if(e.y>canvas.height) enemies.splice(ei,1);
      bullets.forEach((b,bi)=>{ if(b.x<b.x+e.width && b.x+b.width>e.x && b.y<b.y+e.height && b.y+b.height>e.y){ e.hp--; e.flash=2; bullets.splice(bi,1); if(e.hp<=0){ enemies.splice(ei,1); score+=10; kills++; if(score>highScore){ highScore=score; localStorage.setItem('fs_high',highScore);} } soundHit(); } });
    });

    // powerUps
    if(time-lastPU>8000){ spawnPowerUp(); lastPU=time; }
    powerUps.forEach((p,pi)=>{ p.y+=p.speed; if(p.y>canvas.height) powerUps.splice(pi,1);
      if(player.x<p.x+p.width && player.x+player.width>p.x && player.y<p.y+p.height && player.y+player.height>p.y){ 
        if(p.type==='life'){ player.lives=Math.min(player.maxLives,player.lives+30); } else { player.shield=true; setTimeout(()=>player.shield=false,6000); }
        powerUps.splice(pi,1); soundPickup();
      }
    });

    // draw player
    ctx.drawImage(playerImg,player.x,player.y,player.width,player.height);
    bullets.forEach(b=>ctx.drawImage(bulletImg,b.x,b.y,b.width,b.height));

    // draw enemies
    enemies.forEach(e=>{
      if(e.flash>0){ ctx.globalAlpha=0.85; ctx.fillStyle='#fff'; ctx.fillRect(e.x-2,e.y-2,e.width+4,e.height+4); ctx.globalAlpha=1; e.flash--; }
      if(e.shape==='rect'){ ctx.fillStyle=e.color; ctx.fillRect(e.x,e.y,e.width,e.height); } 
      else { ctx.fillStyle=e.color; ctx.beginPath(); ctx.moveTo(e.x+e.width/2,e.y); ctx.lineTo(e.x,e.y+e.height); ctx.lineTo(e.x+e.width,e.y+e.height); ctx.closePath(); ctx.fill(); }
    });

    // draw powerUps
    powerUps.forEach(p=>{ ctx.fillStyle=p.type2; ctx.beginPath(); ctx.arc(p.x+p.width/2,p.y+p.height/2,p.width/2,0,Math.PI*2); ctx.fill(); });

    // check collision enemy->player
    enemies.forEach(e=>{ if(player.x<e.x+e.width && player.x+player.width>e.x && player.y<e.y+e.height && player.y+player.height>e.y){ if(!player.shield) player.lives-=12; soundDamage(); enemies.splice(enemies.indexOf(e),1); } });

    // draw player HUD lives
    ctx.fillStyle=player.shield?'#1de9b6':'#ff6b6b';
    ctx.fillRect(18,canvas.height-28,player.lives*2,12); ctx.strokeStyle='#66fcf1'; ctx.strokeRect(18,canvas.height-28,player.maxLives*2,12);

    // XP gain simulation
    xp+=kills*0.5; if(xp>=xpGoal){ xp-=xpGoal; level++; xpGoal=Math.floor(xpGoal*1.3); soundLevelUp(); }
    updateHUD();

    if(player.lives<=0){ gameOver=true; document.getElementById('finalScore').textContent=score; document.getElementById('gameover').style.display='flex'; }
  }
  if(!gameOver) requestAnimationFrame(gameLoop);
}

</script>
</body>
</html>
