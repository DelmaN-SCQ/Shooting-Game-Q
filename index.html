<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Futuristic Shooter — Pro</title>
<style>
  html,body{margin:0;padding:0;width:100%;height:100%;background:#071025;overflow:hidden;font-family:Arial, sans-serif;color:#fff;}
  canvas{display:block;}
  .overlay{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none;}
  .card{pointer-events:auto;background:rgba(0,0,0,0.7);padding:20px;border-radius:12px;text-align:center;}
  .btn{padding:10px 16px;background:#1de9b6;border:none;border-radius:8px;color:#021019;cursor:pointer;margin:4px;}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<div id="menu" class="overlay">
  <div class="card">
    <h2>Futuristic Shooter</h2>
    <button id="startBtn" class="btn">Start</button>
  </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

let gameStarted=false, gameOver=false, paused=false;
let score=0, level=1, xp=0, xpGoal=100;

const playerImg = new Image();
playerImg.src = 'https://i.imgur.com/3Qp6f2X.png'; // rakieta

const enemyImg = new Image();
enemyImg.src = 'https://i.imgur.com/tpXozYQ.png'; // wrogowie PNG

const bullets = [];
const enemies = [];

const player = {x:canvas.width/2, y:canvas.height-100, w:48, h:64, speed:7, hp:100, maxHp:100};

document.getElementById('startBtn').onclick = ()=>{gameStarted=true; document.getElementById('menu').style.display='none'; spawnEnemies();};

const keys = {};
addEventListener('keydown',e=>{keys[e.key]=true; if(e.key===' ') shoot();});
addEventListener('keyup',e=>{keys[e.key]=false;});

function shoot(){ bullets.push({x:player.x-6,y:player.y-28,w:12,h:28,speed:15}); }

function spawnEnemies(){
  if(!gameStarted) return;
  if(enemies.length<10) enemies.push({x:Math.random()*(canvas.width-48), y:-50, w:48, h:48, hp:40, maxHp:40});
  setTimeout(spawnEnemies, 1200);
}

function update(){
  if(!gameStarted) return;
  if(keys['ArrowLeft']||keys['a']) player.x-=player.speed;
  if(keys['ArrowRight']||keys['d']) player.x+=player.speed;
  if(keys['ArrowUp']||keys['w']) player.y-=player.speed;
  if(keys['ArrowDown']||keys['s']) player.y+=player.speed;
  player.x = Math.max(player.w/2, Math.min(canvas.width-player.w/2, player.x));
  player.y = Math.max(player.h/2, Math.min(canvas.height-player.h/2, player.y));

  bullets.forEach((b,i)=>{
    b.y-=b.speed;
    if(b.y<0) bullets.splice(i,1);
  });

  enemies.forEach((e,ei)=>{
    e.y+=1.5;
    bullets.forEach((b,bi)=>{
      if(b.x<b.x+e.w && b.x+b.w>e.x && b.y<b.y+e.h && b.y+b.h>e.y){
        e.hp-=20; bullets.splice(bi,1);
        if(e.hp<=0){ enemies.splice(ei,1); score+=100; xp+=20; if(xp>=xpGoal){ level++; xp-=xpGoal; xpGoal=Math.floor(xpGoal*1.5); } }
      }
    });
    if(player.x-player.w/2<e.x+e.w && player.x+player.w/2>e.x && player.y-player.h/2<e.y+e.h && player.y+player.h/2>e.y){
      player.hp-=20; enemies.splice(ei,1);
      if(player.hp<=0){ gameOver=true; alert('Koniec gry!'); gameStarted=false; }
    }
    if(e.y>canvas.height+50) enemies.splice(ei,1);
  });
}

let lastXpWidth = 0;
let lastHpWidth = 0;

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // player
  if(playerImg.complete) ctx.drawImage(playerImg, player.x-player.w/2, player.y-player.h/2, player.w, player.h); 
  else { ctx.fillStyle='#1de9b6'; ctx.fillRect(player.x-player.w/2, player.y-player.h/2, player.w, player.h); }

  // bullets
  ctx.fillStyle='#ffec5c';
  bullets.forEach(b=>ctx.fillRect(b.x,b.y,b.w,b.h));

  // enemies
  enemies.forEach(e=>{ if(enemyImg.complete) ctx.drawImage(enemyImg,e.x,e.y,e.w,e.h); else { ctx.fillStyle='#ff6b6b'; ctx.fillRect(e.x,e.y,e.w,e.h); } });

  // dolny lewy HUD: HP + XP
  const barW = 160, barH = 16;
  const padding=10;
  const hpX=padding, hpY=canvas.height-barH*2-padding;
  const xpX=padding, xpY=canvas.height-barH-padding;

  // płynny animowany efekt
  lastHpWidth += (barW*(player.hp/player.maxHp)-lastHpWidth)*0.1;
  lastXpWidth += (barW*(xp/xpGoal)-lastXpWidth)*0.1;

  // HP bar gradient
  const hpGrad=ctx.createLinearGradient(hpX,hpY,hpX+barW,hpY);
  hpGrad.addColorStop(0,'#ff4e50'); hpGrad.addColorStop(1,'#f9d423');
  ctx.fillStyle='rgba(50,50,50,0.5)'; ctx.fillRect(hpX,hpY,barW,barH);
  ctx.fillStyle=hpGrad; ctx.fillRect(hpX,hpY,lastHpWidth,barH);
  ctx.strokeStyle='rgba(255,255,255,0.2)'; ctx.strokeRect(hpX,hpY,barW,barH);

  // XP bar gradient
  const xpGrad=ctx.createLinearGradient(xpX,xpY,xpX+barW,xpY);
  xpGrad.addColorStop(0,'#4facfe'); xpGrad.addColorStop(1,'#00f2fe');
  ctx.fillStyle='rgba(50,50,50,0.5)'; ctx.fillRect(xpX,xpY,barW,barH);
  ctx.fillStyle=xpGrad; ctx.fillRect(xpX,xpY,lastXpWidth,barH);
  ctx.strokeStyle='rgba(255,255,255,0.2)'; ctx.strokeRect(xpX,xpY,barW,barH);

  // tekst
  ctx.fillStyle='#fff'; ctx.font='12px Arial'; ctx.fillText(`HP: ${player.hp}/${player.maxHp}`, hpX+4, hpY+12);
  ctx.fillText(`XP: ${xp}/${xpGoal}`, xpX+4, xpY+12);
}

function loop(){
  if(gameStarted){ update(); draw(); }
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
