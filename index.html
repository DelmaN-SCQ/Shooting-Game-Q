<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Futuristic Shooter</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;background:#071025;font-family:Arial,sans-serif;color:#fff;}
canvas{display:block;}
#menu,#gameover,#settingsMenu,#pauseOverlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:10;}
.card{background:rgba(0,10,30,0.95);padding:20px;border-radius:12px;text-align:center;}
.btn{padding:10px 16px;margin:5px;background:#1de9b6;color:#021019;border:none;border-radius:8px;cursor:pointer;font-weight:bold;}
#hudCluster{position:fixed;top:10px;right:10px;text-align:right;}
.hudBox{margin-bottom:6px;}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<!-- HUD -->
<div id="hudCluster">
  <div class="hudBox">Punkty: <span id="hudScore">0</span></div>
  <div class="hudBox">Poziom: <span id="hudLevel">1</span></div>
  <div class="hudBox">High Score: <span id="hudHS">0</span></div>
</div>

<!-- Menu -->
<div id="menu">
  <div class="card">
    <h2>Futuristic Shooter</h2>
    <button id="playBtn" class="btn">GRAJ</button>
  </div>
</div>

<!-- Game Over -->
<div id="gameover" style="display:none">
  <div class="card">
    <h2>Koniec gry</h2>
    <p>Tw√≥j wynik: <span id="finalScore">0</span></p>
    <button id="restartBtnMain" class="btn">Restart</button>
    <button id="menuBtnMain" class="btn">Menu</button>
  </div>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

let gameStarted=false, gameOver=false;
let player={x:canvas.width/2,y:canvas.height-100,width:48,height:48,speed:7,lives:100,maxLives:100,xp:0,xpGoal:100};
let bullets=[],enemies=[];
let score=0,level=1,highScore=0;

// Sprites (base64 placeholders)
const playerImg=new Image();
playerImg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB6klEQVRYR+2Xv0tUYRjHf9/fYFCQUP7iJUZRtWkUBRRaSiqCK+RPG9tq1KDbVUnZZVUoiYqyo0VdcFKgqRKjZbaQfRfr7j37u0mEyS0nc3XnPff+ee73Hc0DpBKpx6DMuL+UAsyYKYXjY4AnZgIIMZmFP0kExNMBv6I3g3nNzMfwTsJ/qMfA1TkqKu+HoOw8DPf7XDMV+Q1s1cH/kAx0wP+RoxXAn0T38Cjs3s41rY7eAG4pHe+2wcR2DGN/CTHz4GnE1/PvZP+2+8G5WNYb9XvYrfvbrPGx2r4N+Tv4K7CvxW+C3wIr7MMX+vPXClH6U6uf4VZ+X7y8JwC0L4T9hXr8IGc5HZj/HOC0G/+k0bGx3cC1McXlYxSbsNmbXED6HvzLhjg6e8pP2AoYHsaUxr+3Bh7pDKWBtKqWLGyHkJfAxOVh2kJ1oZkZkoVju9fmdIbbI8xUzQyQbRoGBkN4Y+S3Uk5juT+ADuh4G2Ae3JtHz3rC9ACx8CHnQHzg6tMbYz2iJ3L3UNaE+b1Fcm+63JkbZyIfa6xgMwl8HSRGPngvOktwGbYHLgI32X5DcD6gF2D+fQB7gHsBZwfD2HsI3gI+Ac4EXiXzC1n3rMiHOfdT5YKuQAAAABJRU5ErkJggg==';
const bulletImg=new Image();
bulletImg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAADNo/U5AAAARklEQVQoz2NgwAGGgP///x8YGBg+M/AyMlE7AUjGZgYGBQwMjAyMDFDIxgYGJgYmBjAysDAwPjDgYGBkYGkI6gACnEjLZ2GqPnQAAAABJRU5ErkJggg==';
const enemyImg=new Image();
enemyImg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAAU0lEQVQ4T2NkoBAwUqifhP0HzF8YGBg4H8n8GZkZGBg0MDAyMDIxMTAwMDAyMDAwMDEw4QYG4l8foE/GAAqSC0K/EGIZ4AAAybwJGHZgW+gAAAABJRU5ErkJggg==';

// HUD
const hudScore=document.getElementById('hudScore');
const hudLevel=document.getElementById('hudLevel');
const hudHS=document.getElementById('hudHS');

// Menu buttons
document.getElementById('playBtn').onclick=startGame;
document.getElementById('restartBtnMain').onclick=()=>{startGame();document.getElementById('gameover').style.display='none';};
document.getElementById('menuBtnMain').onclick=()=>{document.getElementById('gameover').style.display='none';document.getElementById('menu').style.display='flex';gameStarted=false;gameOver=false;};

function startGame(){
  gameStarted=true; gameOver=false;
  document.getElementById('menu').style.display='none';
  player.x=canvas.width/2; player.y=canvas.height-100; player.lives=100; player.xp=0;
  bullets.length=0; enemies.length=0;
  score=0; level=1;
  updateHUD();
}

function updateHUD(){
  hudScore.innerText=score;
  hudLevel.innerText=level;
  hudHS.innerText=highScore;
}

// Controls
const keys={};
document.addEventListener('keydown',e=>keys[e.key]=true);
document.addEventListener('keyup',e=>keys[e.key]=false);

function spawnEnemy(){
  enemies.push({x:Math.random()*(canvas.width-32),y:-32,width:32,height:32,hp:40});
}

function update(){
  if(!gameStarted||gameOver) return;
  // Player movement
  if(keys['ArrowLeft']||keys['a']) player.x-=player.speed;
  if(keys['ArrowRight']||keys['d']) player.x+=player.speed;
  if(keys['ArrowUp']||keys['w']) player.y-=player.speed;
  if(keys['ArrowDown']||keys['s']) player.y+=player.speed;
  player.x=Math.max(player.width/2,Math.min(canvas.width-player.width/2,player.x));
  player.y=Math.max(player.height/2,Math.min(canvas.height-player.height/2,player.y));

  // Bullets
  for(let i=bullets.length-1;i>=0;i--){ bullets[i].y-=10; if(bullets[i].y<0) bullets.splice(i,1); }

  // Enemies
  if(Math.random()<0.02) spawnEnemy();
  for(let i=enemies.length-1;i>=0;i--){
    enemies[i].y+=2;
    // Collision with bullets
    for(let j=bullets.length-1;j>=0;j--){
      if(bullets[j].x<enemies[i].x+enemies[i].width && bullets[j].x+8>enemies[i].x &&
         bullets[j].y<enemies[i].y+enemies[i].height && bullets[j].y+16>enemies[i].y){
        bullets.splice(j,1);
        enemies[i].hp-=20;
        if(enemies[i].hp<=0){score+=100;player.xp+=20;enemies.splice(i,1);}
        break;
      }
    }
    if(enemies[i] && enemies[i].y>canvas.height) enemies.splice(i,1);
  }

  // Level up
  if(player.xp>=player.xpGoal){player.xp-=player.xpGoal;level++;}

  if(player.lives<=0){gameOver=true;gameStarted=false;document.getElementById('gameover').style.display='flex';document.getElementById('finalScore').innerText=score; if(score>highScore) highScore=score;}
  updateHUD();
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(!gameStarted) return;
  // Player
  ctx.drawImage(playerImg,player.x-player.width/2,player.y-player.height/2,player.width,player.height);
  // HP bar
  ctx.fillStyle='#444'; ctx.fillRect(player.x-32,player.y-40,64,6);
  ctx.fillStyle='#4caf50'; ctx.fillRect(player.x-32,player.y-40,64*(player.lives/player.maxLives),6);
  // XP bar
  ctx.fillStyle='#222'; ctx.fillRect(player.x-32,player.y-32,64,4);
  ctx.fillStyle='#2196f3'; ctx.fillRect(player.x-32,player.y-32,64*(player.xp/player.xpGoal),4);
  // Bullets
  bullets.forEach(b=>ctx.drawImage(bulletImg,b.x,b.y,8,16));
  // Enemies
  enemies.forEach(e=>ctx.drawImage(enemyImg,e.x,e.y,e.width,e.height));
}

// Shoot bullets
setInterval(()=>{if(gameStarted) bullets.push({x:player.x-4,y:player.y-28});},300);

// Game loop
function loop(){update(); draw(); requestAnimationFrame(loop);}
loop();
</script>
</body>
</html>
