<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strzelanka z Sprite</title>
    <style>
        body {
            margin: 0;
            background: #111;
            overflow: hidden;
            font-family: Arial, sans-serif;
            color: white;
        }
        canvas {
            display: block;
            margin: auto;
            background: #222;
        }
        #ui {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
<div id="ui">Punkty: <span id="score">0</span> | Życia: <span id="lives">3</span></div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// --- Sprites ---
const playerImg = new Image();
playerImg.src = 'https://i.imgur.com/3W6Yf6P.png'; // przykładowy gracz

const enemyImg = new Image();
enemyImg.src = 'https://i.imgur.com/7UuMZft.png'; // przykładowy wróg

const bulletImg = new Image();
bulletImg.src = 'https://i.imgur.com/htQ5X0c.png'; // przykładowy pocisk

// --- Gracz ---
const player = {
    x: canvas.width/2 - 25,
    y: canvas.height - 80,
    width: 50,
    height: 50,
    speed: 7,
    lives: 3
};

// --- Pociski ---
const bullets = [];
const bulletSpeed = 12;

// --- Wrogowie ---
const enemies = [];
const enemySpeed = 2;
let spawnInterval = 1000;

// --- Punkty ---
let score = 0;

// --- Sterowanie ---
const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);
document.addEventListener('keydown', e => {
    if(e.key === ' ') shoot();
});

// --- Funkcje ---
function shoot() {
    bullets.push({x: player.x + player.width/2 - 5, y: player.y, width: 10, height: 20});
}

function spawnEnemy() {
    const size = 50;
    const x = Math.random() * (canvas.width - size);
    enemies.push({x, y: -size, width: size, height: size});
}

setInterval(spawnEnemy, spawnInterval);

function update() {
    // Ruch gracza
    if(keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
    if(keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += player.speed;
    if(keys['ArrowUp'] && player.y > 0) player.y -= player.speed;
    if(keys['ArrowDown'] && player.y + player.height < canvas.height) player.y += player.speed;

    // Ruch pocisków
    for(let i = bullets.length-1; i>=0; i--) {
        bullets[i].y -= bulletSpeed;
        if(bullets[i].y + bullets[i].height < 0) bullets.splice(i,1);
    }

    // Ruch wrogów
    for(let i = enemies.length-1; i>=0; i--) {
        enemies[i].y += enemySpeed;

        // Kolizje z pociskami
        for(let j = bullets.length-1; j>=0; j--) {
            if(bullets[j].x < enemies[i].x + enemies[i].width &&
               bullets[j].x + bullets[j].width > enemies[i].x &&
               bullets[j].y < enemies[i].y + enemies[i].height &&
               bullets[j].y + bullets[j].height > enemies[i].y) {
                   bullets.splice(j,1);
                   enemies.splice(i,1);
                   score += 10;
                   document.getElementById('score').innerText = score;
                   break;
            }
        }

        // Kolizja z graczem
        if(enemies[i] &&
           player.x < enemies[i].x + enemies[i].width &&
           player.x + player.width > enemies[i].x &&
           player.y < enemies[i].y + enemies[i].height &&
           player.y + player.height > enemies[i].y) {
               enemies.splice(i,1);
               player.lives--;
               document.getElementById('lives').innerText = player.lives;
               if(player.lives <= 0){
                   alert("Koniec gry! Punkty: " + score);
                   window.location.reload();
               }
        }

        // Wrogowie poza ekranem
        if(enemies[i] && enemies[i].y > canvas.height) enemies.splice(i,1);
    }
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Gracz
    ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);

    // Pociski
    bullets.forEach(b => ctx.drawImage(bulletImg, b.x, b.y, b.width, b.height));

    // Wrogowie
    enemies.forEach(e => ctx.drawImage(enemyImg, e.x, e.y, e.width, e.height));
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
