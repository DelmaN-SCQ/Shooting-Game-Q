<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Futuristic Shooter — Pro (stable)</title>
<style>
:root{
  --bg1:#071025; --bg2:#000814; --accent:#1de9b6; --accent2:#66fcf1;
  --muted:#9aa5b1;
}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));font-family:Inter,Arial,Helvetica,sans-serif;color:#e6f7ff;}
canvas{display:block;width:100vw;height:100vh;}
.overlay{position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;pointer-events:none;}
.card{pointer-events:auto;background:linear-gradient(180deg,rgba(7,16,37,0.85),rgba(0,8,20,0.9));border-radius:14px;padding:22px;border:1px solid rgba(110,230,190,0.12);box-shadow:0 10px 30px rgba(0,0,0,0.6);min-width:320px;max-width:720px;}
.title{font-size:36px;text-align:center;margin:0 0 6px 0;color:var(--accent);letter-spacing:1px;text-shadow:0 6px 18px rgba(34,202,163,0.08);}
.subtitle{color:var(--muted);text-align:center;margin:6px 0 14px 0;}
.btn{display:inline-block;padding:12px 20px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;color:#021019;font-weight:700;cursor:pointer;font-size:16px;margin:6px;}
.btn.small{padding:8px 12px;font-size:13px;border-radius:8px;}
.row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
#hudCluster{position:fixed;right:18px;top:18px;display:flex;flex-direction:column;gap:8px;align-items:flex-end;pointer-events:auto}
.hudBox{background:rgba(10,18,30,0.45);padding:8px 12px;border-radius:10px;border:1px solid rgba(160,255,230,0.06);backdrop-filter:blur(6px);min-width:170px}
.hudTitle{font-size:13px;color:var(--muted);margin:0}
.hudValue{font-size:18px;color:#eafff7;margin:0;font-weight:600}
#settingsToggle{position:fixed;left:18px;top:18px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);color:var(--accent);cursor:pointer;z-index:50}
#pauseOverlay{position:fixed;left:0;top:0;right:0;bottom:0;display:none;align-items:center;justify-content:center;background:rgba(1,4,10,0.6);backdrop-filter:blur(4px);z-index:40}
.pauseBox{border-radius:12px;padding:18px 26px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));text-align:center;border:1px solid rgba(255,255,255,0.04)}
.pauseTitle{font-size:42px;color:var(--accent);margin:0 0 6px 0}
#settingsPanel{position:fixed;left:18px;top:60px;width:320px;max-width:calc(100vw - 40px);z-index:60;display:none}
.settingRow{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.005));margin-bottom:8px;border:1px solid rgba(255,255,255,0.02)}
.muted{color:var(--muted);font-size:13px}
.center{display:flex;align-items:center;justify-content:center}
footer{position:fixed;left:0;right:0;bottom:8px;text-align:center;color:rgba(230,247,255,0.06);font-size:12px}
@media (max-width:520px){
  .card{min-width:260px;padding:16px}
  .title{font-size:28px}
}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<div id="hudCluster" aria-hidden="true">
  <div class="hudBox"><p class="hudTitle">Punkty</p><p id="hudScore" class="hudValue">0</p></div>
  <div class="hudBox"><p class="hudTitle">Poziom</p><p id="hudLevel" class="hudValue">1</p></div>
  <div class="hudBox"><p class="hudTitle">High Score</p><p id="hudHS" class="hudValue">0</p></div>
</div>

<button id="settingsToggle" title="Ustawienia (kliknij)">⚙</button>
<div id="settingsPanel" class="card" aria-hidden="true">
  <h3 style="margin:0 0 8px 0;color:var(--accent)">Ustawienia</h3>
  <div class="settingRow"><div><div style="font-weight:700">Dźwięk</div><div class="muted">Włącz/Wyłącz efekty</div></div>
    <div><input type="checkbox" id="soundToggle" checked /></div></div>
  <div class="settingRow"><div><div style="font-weight:700">Głośność</div><div class="muted">Reguluje level efektów</div></div>
    <div><input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" /></div></div>
  <div class="settingRow"><div><div style="font-weight:700">Trudność</div><div class="muted">Wybierz tryb</div></div>
    <div><select id="difficulty"><option value="easy">Easy</option><option value="normal" selected>Normal</option><option value="hard">Hard</option></select></div></div>
  <div class="settingRow"><div><div style="font-weight:700">Zachowaj progres</div><div class="muted">Poziom/XP będą zapisane</div></div>
    <div><button id="resetProgress" class="btn small" style="background:#ff6b6b;color:white">Resetuj</button></div></div>
  <div style="margin-top:8px;text-align:center">
    <button id="closeSettings" class="btn small" style="background:linear-gradient(90deg,#66fcf1,#1de9b6)">Zamknij</button>
  </div>
</div>

<div id="menu" class="overlay">
  <div class="card">
    <h2 class="title">FUTURISTIC SHOOTER</h2>
    <p class="subtitle">Pełnoekranowa strzelanka — pauza: <strong>P</strong> | ustawienia: ⚙</p>
    <div class="row"><button id="playBtn" class="btn">Zagraj</button><button id="playDemo" class="btn small">Szybki start</button></div>
    <p style="color:var(--muted);margin-top:12px;font-size:13px">Poruszaj się strzałkami, strzelaj SPACJĄ. Poziomy i XP zapisują się po odświeżeniu.</p>
  </div>
</div>

<div id="pauseOverlay">
  <div class="pauseBox">
    <div class="pauseTitle">PAUZA</div>
    <div style="margin-top:8px;color:var(--muted)">Naciśnij <strong>P</strong> aby wznowić</div>
    <div style="margin-top:12px" class="row"><button id="resumeBtn" class="btn small">Wznów</button><button id="pauseMenuBtn" class="btn small">Menu</button></div>
  </div>
</div>

<div id="gameover" class="overlay" style="display:none">
  <div class="card">
    <h2 class="title">Koniec gry</h2>
    <p class="subtitle">Twój wynik: <span id="finalScore">0</span></p>
    <div class="row"><button id="restartBtnMain" class="btn">Restart</button><button id="menuBtnMain" class="btn small">Menu</button></div>
  </div>
</div>

<footer>© Futuristic Shooter — demo</footer>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
window.addEventListener('resize',resize,{passive:true}); resize();

/* --- Game state --- */
let gameStarted=false, gameOver=false, paused=false;
let score=0, kills=0;
let level=parseInt(localStorage.getItem('fs_level'))||1;
let xp=parseInt(localStorage.getItem('fs_xp'))||0;
let xpGoal=parseInt(localStorage.getItem('fs_xpGoal'))||100;
let highScore=parseInt(localStorage.getItem('fs_high'))||0;
const player={x:canvas.width/2,y:canvas.height-110,width:48,height:64,speed:7,lives:100,maxLives:100,shield:false};
const bullets=[]; const enemies=[]; const powerUps=[];

/* --- HUD --- */
const hudScore=document.getElementById('hudScore');
const hudLevel=document.getElementById('hudLevel');
const hudHS=document.getElementById('hudHS');
function updateHUD(){hudScore.innerText=score;hudLevel.innerText=level;hudHS.innerText=highScore;}

/* --- Input --- */
const keys={};
addEventListener('keydown', e=>{
  if(e.key===' '){ e.preventDefault(); if(gameStarted && !paused && !gameOver) fire(); }
  if(e.key==='p' || e.key==='P'){ togglePause(); }
  keys[e.key]=true;
});
addEventListener('keyup', e=>{ keys[e.key]=false; });

function fire(){ bullets.push({x:player.x-6,y:player.y-28,w:12,h:28,speed:18}); }

/* --- Simple sprites --- */
function drawPlayer(){
  ctx.fillStyle=player.shield?'#4aa3ff':'#1de9b6';
  ctx.fillRect(player.x-player.width/2,player.y-player.height/2,player.width,player.height);
}
function drawBullets(){
  ctx.fillStyle='#ffec5c';
  for(const b of bullets) ctx.fillRect(b.x,b.y,b.w,b.h);
}
function drawEnemies(){
  ctx.fillStyle='#ff6b6b';
  for(const e of enemies) ctx.fillRect(e.x,e.y,e.width,e.height);
}
function drawPowerUps(){
  for(const p of powerUps){
    ctx.fillStyle=p.type==='life'?'#7cff8f':'#72e0ff';
    ctx.beginPath(); ctx.arc(p.x+p.size/2,p.y+p.size/2,p.size/2,0,Math.PI*2); ctx.fill();
  }
}

/* --- Game logic --- */
function startGame(demo=false){
  gameStarted=true; gameOver=false; paused=false; document.getElementById('menu').style.display='none';
  bullets.length=0; enemies.length=0; powerUps.length=0; player.x=canvas.width/2; player.y=canvas.height-110; player.lives=100;
  if(demo){ score=500; xp+=10; }
  updateHUD();
}
function togglePause(state){paused=typeof state==='boolean'?state:!paused; document.getElementById('pauseOverlay').style.display=paused?'flex':'none';}

/* --- Spawning --- */
function spawnEnemy(){ const size=40+Math.random()*20; enemies.push({x:Math.random()*(canvas.width-size),y:-size,width:size,height:size,hp:40}); }
function spawnPowerup(){ const size=20; const type=Math.random()<0.5?'life':'shield'; powerUps.push({x:Math.random()*(canvas.width-size),y:-size,size,type}); }

/* --- Update loop --- */
function update(){
  if(!gameStarted||gameOver||paused) return;
  // move player
  if(keys['ArrowLeft']||keys['a']) player.x-=player.speed;
  if(keys['ArrowRight']||keys['d']) player.x+=player.speed;
  if(keys['ArrowUp']||keys['w']) player.y-=player.speed;
  if(keys['ArrowDown']||keys['s']) player.y+=player.speed;
  player.x=Math.max(player.width/2,Math.min(canvas.width-player.width/2,player.x));
  player.y=Math.max(player.height/2,Math.min(canvas.height-player.height/2,player.y));
  // bullets
  for(let i=bullets.length-1;i>=0;i--){ bullets[i].y-=bullets[i].speed; if(bullets[i].y+bullets[i].h<0) bullets.splice(i,1); }
  // enemies
  for(let i=enemies.length-1;i>=0;i--){
    enemies[i].y+=2;
    // bullet collision
    for(let j=bullets.length-1;j>=0;j--){
      const b=bullets[j], e=enemies[i];
      if(b.x<b.x+e.width && b.x+b.w>e.x && b.y<b.y+e.height && b.y+b.h>e.y){
        bullets.splice(j,1); enemies[i].hp-=20;
        if(enemies[i].hp<=0){ score+=100; xp+=20; enemies.splice(i,1); if(xp>=xpGoal){level++; xp-=xpGoal; xpGoal=Math.floor(xpGoal*1.5);}} break;
      }
    }
    if(enemies[i] && enemies[i].y>canvas.height+50) enemies.splice(i,1);
  }
  // powerUps
  for(let i=powerUps.length-1;i>=0;i--){
    const p=powerUps[i]; p.y+=1.5;
    if(player.x-player.width/2<p.x+p.size && player.x+player.width/2>p.x && player.y-player.height/2<p.y+p.size && player.y+player.height/2>p.y){
      if(p.type==='life'){player.lives=Math.min(player.maxLives,player.lives+20);}
      else{player.shield=true; setTimeout(()=>player.shield=false,6000);}
      powerUps.splice(i,1);
    }
    if(p.y>canvas.height+40) powerUps.splice(i,1);
  }
  localStorage.setItem('fs_level',level); localStorage.setItem('fs_xp',xp); localStorage.setItem('fs_xpGoal',xpGoal); localStorage.setItem('fs_high',highScore);
  updateHUD();
}

/* --- Draw loop --- */
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // background gradient
  const g=ctx.createLinearGradient(0,0,0,canvas.height); g.addColorStop(0,'#071025'); g.addColorStop(1,'#000814'); ctx.fillStyle=g; ctx.fillRect(0,0,canvas.width,canvas.height);
  drawPlayer(); drawBullets(); drawEnemies(); drawPowerUps();
}

/* --- Main loop --- */
function loop(){
  update(); draw(); requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* --- UI Handlers --- */
document.getElementById('playBtn').onclick=()=>startGame();
document.getElementById('playDemo').onclick=()=>startGame(true);
document.getElementById('resumeBtn').onclick=()=>togglePause(false);
document.getElementById('pauseMenuBtn').onclick=()=>{togglePause(false); document.getElementById('menu').style.display='flex'; gameOver=false; gameStarted=false;}
document.getElementById('restartBtnMain').onclick=()=>{startGame(); document.getElementById('gameover').style.display='none';}
document.getElementById('menuBtnMain').onclick=()=>{document.getElementById('gameover').style.display='none'; document.getElementById('menu').style.display='flex'; gameStarted=false; gameOver=false;}
document.getElementById('settingsToggle').onclick=()=>{const p=document.getElementById('settingsPanel'); p.style.display=p.style.display==='block'?'none':'block';};
document.getElementById('closeSettings').onclick=()=>{document.getElementById('settingsPanel').style.display='none';};
document.getElementById('resetProgress').onclick=()=>{if(confirm('Resetować poziom/XP/high score?')){level=1; xp=0; xpGoal=100; highScore=0; localStorage.clear(); updateHUD();};};

</script>
</body>
</html>
