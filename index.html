# Generating modern 2D "neon" enemy sprites, projectile, power-up, and an explosion sprite sheet.
# Outputs are saved to /mnt/data and links will be provided in the assistant response.
from PIL import Image, ImageDraw, ImageFilter, ImageEnhance
import math, os

out_dir = "/mnt/data/modern_sprites"
os.makedirs(out_dir, exist_ok=True)

def neon_shape(size, shape='triangle', color=(0,200,255), glow_color=(0,255,200)):
    w,h = size
    base = Image.new("RGBA", (w,h), (0,0,0,0))
    draw = ImageDraw.Draw(base)
    cx, cy = w//2, h//2
    # draw core shape
    if shape == 'triangle':
        pts = [(cx, cy-18), (cx+20, cy+16), (cx-20, cy+16)]
        draw.polygon(pts, fill=color+(255,))
    elif shape == 'diamond':
        pts = [(cx, cy-20), (cx+20, cy), (cx, cy+20), (cx-20, cy)]
        draw.polygon(pts, fill=color+(255,))
    elif shape == 'hex':
        pts = [(cx-12, cy-22),(cx+12, cy-22),(cx+22, cy),(cx+12, cy+22),(cx-12, cy+22),(cx-22, cy)]
        draw.polygon(pts, fill=color+(255,))
    elif shape == 'wing':
        draw.ellipse([cx-22, cy-12, cx-6, cy+12], fill=color+(255,))
        draw.ellipse([cx+6, cy-12, cx+22, cy+12], fill=color+(255,))
        draw.rectangle([cx-6, cy-18, cx+6, cy+18], fill=color+(255,))
    # add cockpit
    draw.ellipse([cx-8, cy-6, cx+8, cy+10], fill=(255,255,255,200))
    # glow
    glow = base.copy().filter(ImageFilter.GaussianBlur(radius=6))
    enhancer = ImageEnhance.Color(glow)
    glow = enhancer.enhance(1.2)
    # tint glow
    glow_data = glow.getdata()
    glow = Image.new("RGBA", (w,h))
    glow.putdata([(glow_color[0], glow_color[1], glow_color[2], int(p[3]*0.8)) for p in glow_data])
    result = Image.new("RGBA",(w,h),(0,0,0,0))
    result = Image.alpha_composite(result, glow)
    result = Image.alpha_composite(result, base)
    return result

# Create enemy sprites (64x64)
enemy_files = []
enemy_variants = [
    ('enemy_tri', 'triangle', (0,200,255), (0,120,255)),
    ('enemy_dia', 'diamond', (255,90,255), (200,60,255)),
    ('enemy_hex', 'hex', (255,160,60), (255,200,120)),
    ('enemy_wing', 'wing', (120,255,180), (60,200,140)),
]
for name, shape, color, glow in enemy_variants:
    im = neon_shape((64,64), shape=shape, color=color, glow_color=glow)
    # add slight inner stroke
    draw = ImageDraw.Draw(im)
    draw.ellipse([24,26,40,42], outline=(0,0,0,60))
    path = os.path.join(out_dir, f"{name}.png")
    im.save(path)
    enemy_files.append(path)

# projectile (32x32)
proj = Image.new("RGBA",(32,32),(0,0,0,0))
d = ImageDraw.Draw(proj)
d.ellipse([10,4,22,24], fill=(255,245,120,255))
proj_glow = proj.filter(ImageFilter.GaussianBlur(radius=3))
proj_result = Image.alpha_composite(Image.new("RGBA",(32,32),(0,0,0,0)), proj_glow)
proj_result = Image.alpha_composite(proj_result, proj)
proj_path = os.path.join(out_dir,"proj.png")
proj_result.save(proj_path)

# power-up (32x32)
pwr = Image.new("RGBA",(32,32),(0,0,0,0))
d = ImageDraw.Draw(pwr)
d.rectangle([8,8,24,24], fill=(100,255,255,255))
d.rectangle([12,4,20,28], fill=(255,255,255,40))
pwr_glow = pwr.filter(ImageFilter.GaussianBlur(radius=3))
pwr_result = Image.alpha_composite(Image.new("RGBA",(32,32),(0,0,0,0)), pwr_glow)
pwr_result = Image.alpha_composite(pwr_result, pwr)
pwr_path = os.path.join(out_dir,"powerup.png")
pwr_result.save(pwr_path)

# explosion sprite sheet: 16 frames, each 64x64, arranged horizontally
frames = 16
fw = 64; fh = 64
sheet = Image.new("RGBA",(fw*frames, fh),(0,0,0,0))
for i in range(frames):
    frame = Image.new("RGBA",(fw,fh),(0,0,0,0))
    draw = ImageDraw.Draw(frame)
    # animated radius
    t = i / frames
    maxr = 26
    r = int(maxr * (0.2 + 0.8 * (1 - (t-0.3)**2)))  # pulse like
    # gradient circles
    for j in range(6):
        alpha = int(200 * (1 - j/6) * (1-t))
        col = (255, 200 - j*20, 80 + j*10, alpha)
        draw.ellipse([fw/2 - r - j*3, fh/2 - r - j*3, fw/2 + r + j*3, fh/2 + r + j*3], outline=None, fill=col)
    # small sparks
    for k in range(6):
        ang = k * (math.pi*2/6) + t*10
        sx = fw/2 + math.cos(ang)*(r+8)
        sy = fh/2 + math.sin(ang)*(r+8)
        draw.ellipse([sx-3, sy-3, sx+3, sy+3], fill=(255,220,120,200))
    # blur a bit
    frame = frame.filter(ImageFilter.GaussianBlur(radius=1.2))
    sheet.paste(frame, (i*fw,0), frame)

explode_path = os.path.join(out_dir,"explosion_sheet.png")
sheet.save(explode_path)

# List produced files
produced = enemy_files + [proj_path, pwr_path, explode_path]

for p in produced:
    print(p)
