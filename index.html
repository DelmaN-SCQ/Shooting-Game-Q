<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Futuristic Shooter â€” Double Shot</title>
<style>
body, html {margin:0; padding:0; overflow:hidden; background:#071025; color:#fff; font-family:sans-serif;}
canvas {display:block;}
#hud {position:absolute; top:10px; right:10px;}
.powerup {position:absolute; bottom:50px; left:10px; font-size:14px; color:#1de9b6;}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="hud">Score: <span id="score">0</span></div>
<div class="powerup" id="powerupInfo">Power-up: brak</div>
<script>
const canvas=document.getElementById('c');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

let player={x:canvas.width/2, y:canvas.height-100, w:50, h:60, lives:100, shield:false, doubleShot:0, doubleTimer:0};
let bullets=[], enemies=[], powerUps=[], explosions=[];
let keys={}, score=0;

function spawnEnemy(){ enemies.push({x:Math.random()*(canvas.width-40), y:-40, w:40, h:40, hp:40}); }
function spawnPowerup(){ 
    const types=['life','shield','double']; 
    powerUps.push({x:Math.random()*(canvas.width-20), y:-20, w:20, h:20, type:types[Math.floor(Math.random()*3)]}); 
}

document.addEventListener('keydown', e=>keys[e.key]=true);
document.addEventListener('keyup', e=>keys[e.key]=false);

function fire(){ 
    if(player.doubleShot>0){
        bullets.push({x:player.x-15, y:player.y-30, w:10, h:20});
        bullets.push({x:player.x+5, y:player.y-30, w:10, h:20});
    } else {
        bullets.push({x:player.x-5, y:player.y-30, w:10, h:20});
    }
}

function rectColl(a,b){ return a.x<a.x+b.w && a.x+a.w>b.x && a.y<a.y+b.h && a.y+a.h>b.y; }

function update(){
    if(keys['ArrowLeft']) player.x-=7;
    if(keys['ArrowRight']) player.x+=7;
    if(keys[' ']) fire();
    player.x=Math.max(0, Math.min(canvas.width-player.w, player.x));

    bullets.forEach((b,i)=>{ b.y-=12; if(b.y<0) bullets.splice(i,1); });
    
    enemies.forEach((e,i)=>{
        e.y+=2;
        bullets.forEach((b,j)=>{
            if(b.x<b.x+b.w && b.x+b.w>e.x && b.y<b.y+b.h && b.y+b.h>e.y){
                bullets.splice(j,1); e.hp-=20;
                if(e.hp<=0){ explosions.push({x:e.x,y:e.y,r:0}); enemies.splice(i,1); score+=100; }
            }
        });
        if(player.shield===false && player.x<e.x+e.w && player.x+player.w>e.x && player.y<e.y+e.h && player.y+player.h>e.y){
            player.lives-=20; enemies.splice(i,1);
        }
    });

    powerUps.forEach((p,i)=>{
        p.y+=2;
        if(player.x<p.x+p.w && player.x+player.w>p.x && player.y<p.y+p.h && player.y+player.h>p.y){
            if(p.type==='life') player.lives=Math.min(100,player.lives+20);
            if(p.type==='shield') player.shield=true; setTimeout(()=>player.shield=false,5000);
            if(p.type==='double') player.doubleShot=1; player.doubleTimer=300; 
            powerUps.splice(i,1);
        }
    });

    if(player.doubleShot>0){ player.doubleTimer--; if(player.doubleTimer<=0) player.doubleShot=0; }

    explosions.forEach((ex,i)=>{ ex.r+=4; if(ex.r>30) explosions.splice(i,1); });
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    // player
    ctx.fillStyle=player.shield?'cyan':'green';
    ctx.fillRect(player.x,player.y,player.w,player.h);

    // bullets
    ctx.fillStyle='yellow';
    bullets.forEach(b=>ctx.fillRect(b.x,b.y,b.w,b.h));

    // enemies
    ctx.fillStyle='red';
    enemies.forEach(e=>ctx.fillRect(e.x,e.y,e.w,e.h));

    // powerups
    powerUps.forEach(p=>{
        if(p.type==='life') ctx.fillStyle='lime';
        if(p.type==='shield') ctx.fillStyle='cyan';
        if(p.type==='double') ctx.fillStyle='magenta';
        ctx.fillRect(p.x,p.y,p.w,p.h);
    });

    // explosions
    ctx.strokeStyle='orange'; ctx.lineWidth=2;
    explosions.forEach(ex=>ctx.beginPath(),ctx.arc(ex.x+20,ex.y+20,ex.r,0,Math.PI*2),ctx.stroke());

    document.getElementById('score').innerText=score;
    document.getElementById('powerupInfo').innerText='Power-up: '+(player.doubleShot>0?'Double Shot':'brak');
}

function loop(){ update(); draw(); requestAnimationFrame(loop); }

setInterval(spawnEnemy,1500);
setInterval(spawnPowerup,7000);
loop();
</script>
</body>
</html>
